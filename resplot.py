import matplotlib.pyplot as plt
import numpy as np
from scipy.interpolate import interp1d
import pandas as pd
from sklearn.cluster import DBSCAN
from mpl_toolkits.mplot3d import Axes3D

#copy the consensus semantic distances, consensus tfidf distances, consensus venue distances from resultdebo1.txt in a,b,e list(for inscope data) and a1,b1.e1 list(for outscope data) respectively.

# a stores the consensus semantic distance of all the in-scope data
# b stores the consensus tfidf distance of all the in-scope data
# e stores the consensus venue/bibliography distance of all the in-scope data
# a1 stores the consensus semantic distance of all the out-scope data
# b1 stores the consensus tfidf distance of all the out-scope data
# e1 stores the consensus venue/bibliography distance of all the out-scope data

a=[12.6419487954
,14.4129025111
,10.2579678554
,14.2221702151
,11.3505849583
,10.2166235609
,9.01346842593
,9.10558390722
,12.8182884032
,15.0646045935
,8.28754590246
,14.1258912646
,13.7785209
,15.0850819849
,14.9051532352
,9.33367491598
,12.2745794839
,11.4408419411
,12.8686600725
,9.24397943414
,10.7684526681
,13.5781517899
,15.0641634385
,13.513347208
,15.403513924
,12.6360694544
,11.9800336406
,10.7607034479
,14.5856127915
,13.4451239036
,11.4536152156
,25.351197032
,11.6521775307
,13.4997152399
,12.5248607049
,12.2443751828
,10.816305391
,11.8980425737
,11.9100945319
,13.1087363941
,14.7654322642
,11.9276504066
,10.1076007521
,11.7886368932
,12.500528632
,10.5692785109
,10.9646198952
,12.5659626406
,12.4139287955
,11.2214618491
,8.3597744674
,14.0066602966
,9.45210619692
,10.1469801434
,11.3291326337
,12.4928914461
,15.0007537499
,9.63008137747
,12.2664298599
,13.3590388725
,12.0687935973
,10.9635749131
,10.8103512185
,13.7760406679
,15.3675243296
,14.7418242395
,13.1004919544
,10.2603055192
,15.726784757
,0.0
,10.128360848
,12.5866154882
,11.9786912986
,14.319904796
,9.6098240667
,14.9150281705
,13.4500368945
,12.5239218335
,12.7991205728
,11.15093344
,12.6506589099
,12.0159023609
,12.4751320473
,12.362384184
,11.5822772255
,11.7912656116
,13.5759579097
,9.55795729948
,14.407127633
,10.6791477179
,12.0357246704
,9.51152567168
,15.95463969
,10.3523053534
,11.1829194955
,14.343590658
,13.3865454091
,11.6997616262
,11.3185532751
,12.0067652621
,12.162319271
,13.4046033869
,13.7012488885
,11.4514827549
,12.6648714896
,10.9864969657
,13.4918549782
,10.6190262545
,14.4074101537
,11.1162778467
,13.6201437798
,12.3361125711
,10.5336550849
,13.3999024972
,10.5846147947
,11.4202324207
,12.9713939228
,14.4144504546
,12.3460611585
,13.5311886147
,12.493113681
,11.5972780986
,14.7459525151
,11.0947268927
,10.4975601377
,12.6752548466
,12.9023039507
,11.6834117685
,12.648466052
,13.1410964948
,12.6467267897
,13.5147183865
,15.997411851
,12.560782871
,13.4969790031
,12.9663567372
,14.1486686342
,11.1823622786
,9.88789422786
,11.3632031987
,14.6100915079
,11.2809696561
,14.6605682464
,11.9662800944
,12.4410408523
,10.4437124938
,13.6314362881
,12.5853059011
,10.5648273952
,11.505192186
,12.8393386937
,14.0195699545
,11.1732260292
,13.1720114038
,12.3704127075
,12.0558488902
,11.1189988613
,11.4953770476
,10.2057969536
,14.1350414568
,13.7078921258
,9.53222384637
,13.0791944184
,12.5654457595
,13.0160077323
,14.1873466166
,15.753921104
,14.0221504598]
b=[0.0219214574629
,0.0268322182972
,0.0187820681655
,0.0234515692902
,0.0235206978996
,0.0218820495503
,0.0181115068642
,0.0190687959752
,0.0278340020945
,0.0282304085936
,0.0199144671342
,0.0275297082563
,0.0235982350481
,0.0240431943637
,0.0241478803579
,0.0215639298566
,0.020726989185
,0.0212593720021
,0.0209916545197
,0.0196471856889
,0.0209085819735
,0.0252383730935
,0.022241056806
,0.0212992947693
,0.0242813403298
,0.0219867956707
,0.0239561226177
,0.0196405907603
,0.0212530943727
,0.0233648398409
,0.018933517019
,0.0681090079938
,0.0196989699718
,0.0227745522421
,0.0199050141483
,0.0234326172336
,0.0192554677303
,0.0217431057941
,0.0228734976922
,0.0218055878495
,0.0247762812093
,0.0255937365659
,0.0206125498141
,0.0207679774848
,0.0231468703945
,0.0194726918712
,0.0214955021827
,0.0212148257725
,0.021156297024
,0.0210910229806
,0.0194781904364
,0.0256656899546
,0.023665979907
,0.020275589308
,0.0196352649299
,0.0203027088011
,0.0215285575485
,0.0208219200379
,0.0209093427672
,0.0219285459194
,0.0226839208364
,0.0193867763889
,0.0188546327661
,0.0226555375152
,0.0277371130239
,0.0272416712641
,0.0219944247183
,0.020150338268
,0.0322474674893
,0.0
,0.0212212747938
,0.0219874415303
,0.0203071802347
,0.0245845588603
,0.0222982265419
,0.0292045959051
,0.0235442748237
,0.0214983754695
,0.0236875869232
,0.0293485129831
,0.0244813810481
,0.0218713584728
,0.0208178234443
,0.0209746000826
,0.0225315784541
,0.0242412579824
,0.0200205917607
,0.0186869903427
,0.0280702845971
,0.0200852259301
,0.0211444085114
,0.0191187337499
,0.0262554654646
,0.0194901429326
,0.0244560868105
,0.023617866775
,0.0252843690246
,0.0215013581694
,0.0196828013025
,0.0207966803086
,0.0236128174753
,0.0233168160897
,0.0223967400524
,0.020322853368
,0.0239237899277
,0.0211066981198
,0.021916138022
,0.0172730719732
,0.0279068901645
,0.0242595930805
,0.023885595794
,0.0287130414301
,0.0230803808969
,0.0215958566518
,0.0206591795923
,0.0211575835837
,0.021448399728
,0.021101899386
,0.0239111056613
,0.0204560283621
,0.0234730184737
,0.0231748433753
,0.0238104172187
,0.0193050779404
,0.0208792946571
,0.0213565289124
,0.0243042507004
,0.0217688977167
,0.0197025710883
,0.0234542381871
,0.0209805918957
,0.0253693874926
,0.0251757240754
,0.022579298516
,0.0267028406782
,0.0218209727994
,0.0221393432508
,0.0188602964493
,0.0201980524347
,0.0229863678557
,0.0246442912764
,0.0185460652368
,0.0244100769455
,0.023189480357
,0.0192532879782
,0.0198703113061
,0.026981817854
,0.0214099953313
,0.021580128411
,0.0200833063405
,0.0229323500161
,0.0212629905185
,0.0269333098682
,0.0243969970998
,0.0278028575279
,0.0236929498987
,0.0198987571796
,0.0216467306125
,0.0209856202997
,0.0231387773596
,0.0220851072686
,0.0202462293348
,0.025346674525
,0.0241750044396
,0.0219715435695
,0.0218574398993
,0.0249742192923
,0.0204255051325]
e=[0.0459202991386
,0.0419425569023
,0.0556448708053
,0.0578391587124
,0.0513145599898
,0.0648722567851
,0.0488299696711
,0.0374723584151
,0.0586186268326
,0.0446294697345
,0.0509714602156
,0.0413614762463
,0.0527553030774
,0.04322523165
,0.066581541845
,0.0408615178549
,0.0502190074041
,0.0461010038475
,0.0497927409697
,0.059255321341
,0.0533279305172
,0.0737855655224
,0.0402088998961
,0.046122059137
,0.0437512274429
,0.0445536113261
,0.0490063922899
,0.0675403108717
,0.0687575129416
,0.0554691863831
,0.0461614175041
,0.0800831648826
,0.0585989976744
,0.0750530692953
,0.0330271394379
,0.0524684555785
,0.0533867347798
,0.0632818585253
,0.060846235124
,0.0482426068273
,0.0601528620613
,0.0528037364933
,0.0512577690085
,0.0728570681232
,0.0675653751887
,0.0
,0.0520709186453
,0.0432904328606
,0.0721647694249
,0.0595868454742
,0.0474548086591
,0.0448168112983
,0.0463482261852
,0.0503520031932
,0.0524402479102
,0.0479845025006
,0.053384954877
,0.05323432529
,0.0667986670145
,0.0571456762366
,0.0688980850178
,0.0574093873605
,0.0587495606283
,0.0635524240515
,0.0566815732211
,0.054467397372
,0.0424345388956
,0.0591234999219
,0.0472268097067
,0.0477156371845
,0.0402809083719
,0.0592852610455
,0.0417710077616
,0.0577320743257
,0.0674068635096
,0.0531911558744
,0.0510957303862
,0.0709975820164
,0.0698784685939
,0.0514059418482
,0.0484062801995
,0.0731162777173
,0.0371925167499
,0.0516294245259
,0.0506690043997
,0.0536157896068
,0.0550500504605
,0.0561252905791
,0.0461854085225
,0.0424031575803
,0.0626115316617
,0.0538010785808
,0.0543544259875
,0.0659279589495
,0.0452098245568
,0.0522318267172
,0.0511785596857
,0.0493660810882
,0.0680024524764
,0.053283447344
,0.0616174960922
,0.0570960347949
,0.0743116835281
,0.0617618124765
,0.0590806262575
,0.0619480846753
,0.0679123048344
,0.0469413695851
,0.0527222102509
,0.0454378490618
,0.0560512005626
,0.0544886823216
,0.0569481421136
,0.0467923243406
,0.0495250653656
,0.0427608641888
,0.0604983713167
,0.0434493286275
,0.0538902205561
,0.047262352143
,0.0622037266632
,0.0467633084568
,0.0434414387324
,0.0423613940595
,0.0433490100276
,0.0484448975218
,0.055588311427
,0.0452811911376
,0.0411504570586
,0.0529020199058
,0.075319373702
,0.0482567860556
,0.0455518328191
,0.062324575493
,0.0508914661542
,0.0547949742633
,0.0564759057048
,0.0456838111069
,0.0654772927145
,0.0428913750546
,0.0564481671623
,0.0364337155672
,0.0372440108684
,0.0565340067203
,0.0525884180306
,0.0730216673135
,0.0504697322319
,0.0402875881364
,0.0570516289164
,0.0519870099424
,0.0498284001179
,0.0500004130678
,0.0489105141215
,0.0505429434246
,0.0547024306553
,0.0474875546526
,0.0527188189076
,0.0443212955868
,0.0663180243325
,0.0637427776808
,0.0382731240681
,0.0404594236291
,0.0567291662571
,0.0582826026618
,0.0732829980508
,0.0502656510223
,0.0
,0.0579011099781]

a1=[15.0503601853
,12.6107714986
,14.9460260092
,14.9250985873
,13.2601492371
,12.1133580072
,13.6099200814
,13.5156256118
,13.74231992
,12.1117483146
,12.3271975321
,12.1636568407
,10.9567032785
,15.4474884527
,13.9943850908
,11.8373015735
,15.0975712713
,12.8963552952
,11.6325829
,10.5992272402
,13.9667938933
,13.1236628895
,11.3710809694
,13.0604739539
,13.2979009943
,14.0023104698
,14.6727073749
,11.1694475149
,14.7131013644
,14.2239659037
,12.5553087933
,13.0802509465
,12.4899959968
,13.1794876407
,13.3917547572
,14.2057069712
,10.6792794724
,11.3748201156
,13.2679043723
,12.6807573922
,13.0163252732
,13.5659852121
,11.7814851339
,13.318101748
,14.4950485394
,11.2556752854
,12.1955548373
,12.724880665
,11.5574933816
,11.6333420925
,14.0678319038
,10.9531196079
,10.9118717333
,13.2315102812
,14.3819261226
,12.6729948708
,13.0920964689
,13.161994167
,11.479454008
,12.9903085251
,10.7618988723
,15.0936740052
,13.3313248068
,12.0438228292
,13.1754673427
,12.7698205384
,12.4732316397
,12.4409721865
,14.1420077043
,12.9238939633
,14.0835402342
,11.975955811
,15.4654940929
,10.7046038093
,13.9927439919
,13.8609606866
,11.6724980641
,12.9562503106
,12.4962868857
,13.927268903
,10.4376396569
,10.9120329138
,11.3118206506
,13.9526037267
,13.797493582
,15.5257736761
,13.4814631716
,12.6276149091
,12.9789315168
,12.8705567539
,14.9718252983
,15.9383580171
,13.6665521709
,12.5666774411
,13.6665521709
,14.5011661288
,10.5749668852
,12.296173364
,11.7992323658
,13.8325629944
,11.9896091948
,13.1239739967
,12.3655828084
,11.713137408
,11.6361894331
,12.789721847
,11.4872837713
,10.0706037705
,14.2202029119
,12.1476510954
,12.7845501922
,13.208599871
,12.2067614512
,13.4026088738
,11.7156329439
,10.7697277206
,8.92458633249
,12.9372655224
,10.2643832164
,11.914566061
,10.7108818474
,14.4562274665
,14.3276720346
,13.0029722153
,11.7442212883
,15.1446750016
,14.4000410036
,11.8383415924
,12.667251926
,14.1703553184
,13.2672481838
,12.8521071537
,13.232729334
,13.0663709672
,12.6712391465
,11.798320935
,11.9032437199
,8.79251480425
,12.5334036092
,13.3810598915
,13.9941041067
,11.6037205955
,13.8711768693
,14.2625057529
,12.4483859017
,13.7347448495
,9.6647315108
,12.3325762591
,13.782386254
,11.49270142
,13.8308481956
,11.8527990037
,11.3521952363
,13.3079027792
,12.5888959606
,14.7095762402
,10.1953728789
,13.4677868043
,15.0519736097
,13.5164147368]
b1=[0.0231390251501
,0.0212021030231
,0.0252028432349
,0.0231100025294
,0.0229064199488
,0.0225394801621
,0.0248153395694
,0.0209595194988
,0.0248850676621
,0.0224962609698
,0.0214364883741
,0.0228511956898
,0.025804680614
,0.0222039491927
,0.0214669017483
,0.0229937781611
,0.0265171791
,0.0226345270805
,0.022362904008
,0.0196092182184
,0.0241004511416
,0.0227832540113
,0.0202300952669
,0.0229639299371
,0.0236363426759
,0.0248027941031
,0.0234411281964
,0.0217488375726
,0.0245089065027
,0.0227348451717
,0.0212506912287
,0.022569664978
,0.0226602318759
,0.0215358483672
,0.0218602379117
,0.0300906501117
,0.0186852691556
,0.0186201303976
,0.0220141942261
,0.0226887586851
,0.0223585743069
,0.0223969569166
,0.0213641048491
,0.0233416606231
,0.0247415354859
,0.0207696551213
,0.0250644221012
,0.0217374816286
,0.022343476048
,0.0224380692201
,0.0261931966897
,0.0249394948934
,0.026714464309
,0.0267031895581
,0.0245111385545
,0.0252077464358
,0.0241116357603
,0.0232324858821
,0.0202938091019
,0.0210041997866
,0.0185861936965
,0.0218936292955
,0.0231641297786
,0.0186800931107
,0.0226210805765
,0.0209876018105
,0.0198527515631
,0.021263165063
,0.0271421064142
,0.0203063065311
,0.0235345991662
,0.0198157909776
,0.0287325075344
,0.0236006368444
,0.0250754221736
,0.0259712791851
,0.0225149828767
,0.0233828507291
,0.0235719293175
,0.0267951279066
,0.0212296487877
,0.0200682081205
,0.0211395378082
,0.0230806845066
,0.0253075760091
,0.0233784040589
,0.0224934860016
,0.0227176051552
,0.0232297117888
,0.0229892775925
,0.0288489719113
,0.0285366889348
,0.0255726890095
,0.0240596552003
,0.0255726890095
,0.0246797157005
,0.0228505815461
,0.0257710192395
,0.0215651541361
,0.0226766729742
,0.0207140398964
,0.0237130071026
,0.0206592643517
,0.0220489184982
,0.0214382505753
,0.0227064644878
,0.0211151278947
,0.022411575336
,0.0238884442973
,0.0196696431126
,0.0203003222396
,0.0209907582408
,0.0224763415643
,0.0210837048171
,0.0224280452685
,0.0191531030095
,0.022189885549
,0.0220655620834
,0.0239101652004
,0.0201109514957
,0.0180386922577
,0.0242472661849
,0.0208028522588
,0.021325716987
,0.0200936116395
,0.024797574992
,0.0264649794831
,0.0226309106684
,0.0255576752162
,0.0277703134583
,0.0217518459107
,0.0223147925312
,0.0224448125675
,0.023508145582
,0.0212705152874
,0.0217745533367
,0.0212158252401
,0.0209339785005
,0.0214718273018
,0.022477106469
,0.0228331445942
,0.0206263150897
,0.0249672918423
,0.024011450437
,0.0198277566678
,0.0202929764454
,0.0206459622166
,0.0220018888967
,0.0234078985611
,0.0202594594748
,0.0240909903391
,0.0216092219904
,0.021303678354
,0.0214519075751
,0.0215723440241
,0.0242070290612
,0.0215137566575
,0.0221038749
,0.0217666735115
,0.0197278021931]
e1=[0.0530818109459
,0.055880256918
,0.0452227260715
,0.0445913530498
,0.0625646805618
,0.0606011404894
,0.056012477901
,0.0505127075889
,0.0711465234712
,0.0620145164674
,0.0672521893054
,0.0535463483392
,0.0597730880905
,0.0667888494592
,0.0843418766178
,0.0399368997445
,0.0606342335222
,0.0409617680889
,0.0548243732623
,0.0486431201189
,0.0439069016314
,0.0625934514349
,0.0592275825438
,0.0688197074388
,0.04874792606
,0.0550351169083
,0.0543138650687
,0.0593574224402
,0.054807024086
,0.0451035704921
,0.040808090452
,0.069464795614
,0.0389363125155
,0.0567380464031
,0.0437976605737
,0.0507583618893
,0.0497169182339
,0.0638448092273
,0.0477261573272
,0.0434009155769
,0.054227347073
,0.0674407363808
,0.055996264873
,0.0389948339379
,0.0529000504102
,0.0478598203386
,0.0510683016993
,0.0603817050311
,0.0573531096484
,0.0551944333834
,0.0541478850469
,0.0729598144284
,0.0517206701165
,0.0652793250572
,0.0681804783493
,0.0550334257559
,0.0633568139714
,0.0532251174762
,0.0330117274659
,0.0671503731635
,0.0591454691598
,0.0401873198676
,0.0571327493396
,0.0552168008023
,0.0806130868208
,0.0446201158532
,0.0493597242286
,0.0419721083991
,0.0556953937521
,0.0516708475597
,0.063766634683
,0.0561520135237
,0.047474553243
,0.0701027450407
,0.0472574077002
,0.0572868047019
,0.0552542547403
,0.042101529941
,0.0512566601539
,0.0367449888433
,0.058355240175
,0.0397411944548
,0.0497260295508
,0.0679445981282
,0.0475508578424
,0.0575947242717
,0.0604403412453
,0.0706696361031
,0.0619734717369
,0.0582069467891
,0.0563096551549
,0.0528993880689
,0.0566918043801
,0.0728000349259
,0.0566918043801
,0.0527644225913
,0.0478246378091
,0.0564340780383
,0.0342144456698
,0.0447920979648
,0.046581597839
,0.0554066407237
,0.0483646050129
,0.0712266865827
,0.0410349266915
,0.0540068273547
,0.0461447162988
,0.0444106158212
,0.0576392432864
,0.0625177950599
,0.0478730811616
,0.0535840866155
,0.044533158663
,0.0462821513763
,0.0626115699671
,0.0569176237068
,0.0472521892138
,0.063094174309
,0.0623921175242
,0.0393309440913
,0.0491735526604
,0.0557930977806
,0.0416263863974
,0.0458225997704
,0.0438569251723
,0.0524226973879
,0.0548273096765
,0.0479798073562
,0.0566872429973
,0.0713594818761
,0.0418291866436
,0.0543408586215
,0.0563443399346
,0.0521275835458
,0.0602944761949
,0.0651613500706
,0.0812589139374
,0.0416670609135
,0.0365404424909
,0.0643495090401
,0.0544828180807
,0.049992157962
,0.0454578286391
,0.0511576134497
,0.036963378245
,0.0487742617434
,0.0495332599361
,0.0749462019369
,0.0475573050385
,0.0493011941727
,0.0630114420273
,0.0737137945613
,0.0537829020116
,0.0541954320607
,0.0700067641003
,0.0521420952287
,0.0559539161575
,0.0542956658845
,0.0534339021441
,0.0396707181761]
c=[]
c.append(a)
c.append(b)
c.append(e)
#c=a+a1
c=np.array(c)
c=c.reshape((len(a),3))
#c=MinMaxScaler().fit_transform(c)
#df=pd.DataFrame(c,columns=["semantic","tfidf"])
#plt.plot(c[0],c[1],"ro")
c1=[]
c1.append(a1)
c1.append(b1)
c1.append(e1)
c1=np.array(c1)
c1=c1.reshape((len(a1),3))
#print(c[0])
#print(len(c1))
#c=c+c1
d=[]
for i in range(len(c)):
	d.append(c[i])
for i in range(len(c1)):
	d.append(c1[i])
#c1=MinMaxScaler().fit_transform(c1)
#df1=pd.DataFrame(c1,columns=["semantic","tfidf"])
#plt.plot(c1[0],c1[1],"bo")
#plt.show()
print("enter eps value for DBSCAN")
ep=input()
km=DBSCAN(eps=float(ep)).fit(d)
print(km.labels_)
lab=[]
lab=km.labels_
fig=plt.figure()
ax=fig.add_subplot(111,projection='3d')
ax.scatter(a,b,e,c='r',marker='o')
ax.scatter(a1,b1,e1,c='b',marker='o')




print("####################################################")
print("number of inscope data");
print(len(c))
print("number of outscope data");
print(len(c1))
print("####################################################")

print("this results are when we consider inscope data as positive");
tp=0.0
tn=0.0

acc1=0.0
pre1=0.0
rec1=0.0
f1sc1=0.0

acc2=0.0
pre2=0.0
rec2=0.0
f1sc2=0.0
for i in range(len(c)):
	if(lab[i]==0):
		tp=tp+1

for i in range(len(c1)):
	if(lab[len(c)+i]==1):
		tn=tn+1

fn=len(c)-tp
fp=len(c1)-tn

print("acc")
acc1=(tp+tn)/(len(c)+len(c1))
print(acc1)

print("pre")
pre1=tp/(tp+fp)
print(pre1)

print("rec")
rec1=tp/(tp+fn)
print(rec1)

print("f1")
f1sc1=(2*pre1*rec1)/(pre1+rec1)
print(f1sc1)

print("correct pred inscope")
print(tp)

print("wrong pred inscope")
print(fn)

print("correct pred outscope")
print(tn)

print("wrong pred outscope")
print(fp)


print("#######################################################################")
print("this results are when we consider outscope data as positive");
tp=0.0
tn=0.0
for i in range(len(c)):
	if(lab[i]==0):
		tn=tn+1
for i in range(len(c1)):
	if(lab[len(c)+i]==1):
		tp=tp+1
fn=len(c1)-tp
fp=len(c)-tn

print("acc")
acc2=(tp+tn)/(len(c)+len(c1))
print(acc2)

print("pre")
pre2=tp/(tp+fp)
print(pre2)

print("rec")
rec2=tp/(tp+fn)
print(rec2)

print("f1")
f1sc2=(2*pre2*rec2)/(pre2+rec2)
print(f1sc2)


print("#####################################################################################")
print("acc")
print((acc1+acc2)/2)
print("pre")
print((pre1+pre2)/2)

print("recall")
print((rec1+rec2)/2)

print("f1")
print((f1sc1+f1sc2)/2)

plt.show()
